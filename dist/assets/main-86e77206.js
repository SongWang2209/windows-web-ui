var e=Object.defineProperty,__publicField=(a,t,s)=>(((a,t,s)=>{t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s})(a,"symbol"!=typeof t?t+"":t,s),s);import{r as a,d as t,o as s,b as n,e as i,t as o,u as l,p as u,h as p,_ as d,c as r,j as c,k as v,F as g,l as m,m as f,i as x,n as y,A as h,f as M,T as w,q as S,a as _,w as I}from"./index-03b54a0a.js";const _withScopeId$1=e=>(u("data-v-0c1d518c"),e=e(),p(),e),$={class:"header"},b=_withScopeId$1((()=>i("div",{class:"left"},null,-1))),A={class:"center"},z=_withScopeId$1((()=>i("div",{class:"right"},null,-1))),k=d(t({__name:"Header",setup(e){const{HH:t,mm:u}=function UseTime(){const e=a(""),t=a(""),s=a(""),n=a(""),i=a(""),o=a(""),l=["日","一","二","三","四","五","六"],u=a(""),p=a("上午");function updateTime(){const a=new Date;e.value=`${a.getFullYear()}`,t.value=getFillString(a.getMonth()+1),s.value=getFillString(a.getDate()),p.value=a.getHours()>=12?"下午":"上午",n.value=getFillString(a.getHours()),i.value=getFillString(a.getMinutes()),o.value=getFillString(a.getSeconds()),u.value=`星期${l[a.getDay()]}`}function getFillString(e){return e>=10?`${e}`:`0${e}`}return updateTime(),setInterval((()=>{updateTime()}),1e3),{YY:e,MM:t,DD:s,HH:n,mm:i,ss:Number(o.value)>10?o.value:`0${o.value}`,WEEK:u,leftString:p}}();return(e,a)=>(s(),n("div",$,[b,i("div",A,o(l(t))+" : "+o(l(u)),1),z]))}}),[["__scopeId","data-v-0c1d518c"]]);class PosEntity{constructor(){__publicField(this,"x",0),__publicField(this,"y",0)}setX(e){return this.x=e,this}setY(e){return this.y=e,this}}const D=["onMousedown","onMousemove"],P={class:"icon"},F={style:{height:"100%",width:"100%"},"aria-hidden":"true"},B=["xlink:href"],H={class:"name"},T=d(t({__name:"Desktop",setup(e){function getPosByIndex(e){return(new PosEntity).setX(Math.floor(e/h.columnAppNum)*h.appSize).setY(e%h.columnAppNum*h.appSize)}const t=a(new PosEntity);function onMouseMove(e){x().dragApp.id&&(u.value=!0);const a=e.x>h.appSize/2?e.x-h.appSize/2:0,s=e.y-40>h.appSize/2?e.y-40-h.appSize/2:0;t.value.setX(a).setY(s)}const u=a(!1),p=a(0),d=r((()=>x().appList.findIndex((e=>e.id===x().dragApp.id))));const _=a(null);function onMouseUp(){Date.now()-p.value<=300&&function onClick(){x().dragApp.action&&x().dragApp.action()}(),u.value=!1,x().setDragApp(new S)}return(e,a)=>(s(),n("div",{id:"desktop",class:"desktop",onMousemove:onMouseMove,onMouseup:onMouseUp},[c(w,{tag:"div",name:"appList"},{default:v((()=>[(s(!0),n(g,null,m(l(x)().appList,((e,a)=>(s(),n("div",{key:e.name,class:f(["appitem",e.id===l(x)().dragApp.id&&"drag"]),style:y({width:`${l(h).appSize}px`,height:`${l(h).appSize}px`,left:`${e.id===l(x)().dragApp.id&&u.value?t.value.x:getPosByIndex(a).x}px`,top:`${e.id===l(x)().dragApp.id&&u.value?t.value.y:getPosByIndex(a).y}px`}),onMousedown:a=>function onMousedown(e){console.log("mousedown"),p.value=Date.now(),x().setDragApp(e)}(e),onMousemove:s=>function onItemMove(e,a){if(_.value)return;_.value=!0;const s=getPosByIndex(a);x().dragApp.id!==e.id&&u.value&&Math.abs(t.value.x-s.x)<=24&&Math.abs(t.value.y-s.y)<=24&&x().changeAppListIndex(e),setTimeout((()=>{_.value=!1}),100)}(e,a)},[i("div",P,[(s(),n("svg",F,[i("use",{"xlink:href":`#${e.icon}`},null,8,B)]))]),i("div",H,o(e.name),1)],46,D)))),128)),u.value?(s(),n("div",{key:0,class:"fake",style:y({width:`${l(h).appSize}px`,height:`${l(h).appSize}px`,left:`${getPosByIndex(d.value).x}px`,top:`${getPosByIndex(d.value).y}px`})},null,4)):M("",!0)])),_:1})],32))}}),[["__scopeId","data-v-98c55bfa"]]),_withScopeId=e=>(u("data-v-8825961c"),e=e(),p(),e),E={class:"footer"},U=[_withScopeId((()=>i("div",{class:"part size-1"},null,-1))),_withScopeId((()=>i("div",{class:"part size-2"},null,-1))),_withScopeId((()=>i("div",{class:"part size-2"},null,-1)))],Y=d(t({__name:"Footer",setup:e=>(e,a)=>(s(),n("div",E,U))}),[["__scopeId","data-v-8825961c"]]),L=d(t({__name:"main",setup(e){const t=a(!0);setTimeout((()=>{t.value=!1}),1e3);const i=r((()=>({backgroundImage:`url(${x().bgUrl})`})));return window.addEventListener("storage",(e=>{"bgUrl"===e.key&&x().setBgUrl(e.newValue)})),(e,a)=>{const o=_("loading");return I((s(),n("div",{class:"main",style:y(i.value)},[c(k),c(T),c(Y)],4)),[[o,t.value]])}}}),[["__scopeId","data-v-fea1be56"]]);export{L as default};
